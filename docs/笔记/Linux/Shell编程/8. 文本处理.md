主要命令：

echo、fold、fmt、rev、pr、sort、wc、cut、paste、join、tr



# echo命令输出文本

## 基本信息

echo 命令基本语法：

```powershell
echo [options] string…
```

常用选项

- -n ： 不换行
- -e ：输出转义字符，如果希望转义字符被输出，需要使用-e选项

## 输出重定向

默认情况下，echo命令的标准输出设备为显示器。但是，在某些情况下，用户可能不需要将echo命令显示的信息输出到屏幕，而是需要将其保存到一个磁盘文件中，此时，用户就需要使用重定向。

重定向的操作符为>或者>>，在目标文件已经存在的情况下，前者会覆盖目标文件原有的内容，而后者则会将数据追加到原来文件的末尾。



# fold命令格式化行

fold命令的功能是将超过指定宽度的文本行进行折叠处理，使得超过指定宽度的字符转到下一行输出。

基本语法：

```powershell
fold [options] [file…]
```

常用选项：

- -b：按字节计算宽度。默认情况下，fold命令按列来计算宽度
- -s：在空格处折断行
- -w：指定宽度，默认值是80列



# fmt命令格式化段落

与fold命令相比，fmt命令提供了更多的功能。fmt命令是Shell中的一个简单的文本格式化工具，其名称来自于格式化（format）的缩写。

命令语法：

```powershell
 fmt [-width] [option]... [file]...
```

其中，-width选项用来指定文本行的列数，默认为75列，即每行显示75个字符。option表示各种命令选项。

命令选项：

- -c ：保留每个段落的前两行的缩进，该段落剩余的行的左边距与第2行相同
- -t：该选的功能与-c选项基本相同，但是在使用-t选项时，每个段落的第1行和第2行的缩进必须是不相同的，否则第1行将被看做一个单独的段落。
- -s：只折断超出指定宽度的行，不合并少于指定宽度的行。
- -u：统一空格的个数，单词之间保留1个空格，句子之间保留2个空格。
- -w：指定每个行的最大宽度，默认值为75列

参数为要格式化其内容的文件名，可以同时指定多个文件，文件名之间用空格隔开。如果指定文件名为-，则fmt命令会从标准输入，即键盘读取文本



# rev命令反转字符顺序

rev命令的功能是用来反转文件中的文本行的字符顺序，其名称来自于reverse（反转）的前3个字母

基本语法：

```powershell
rev [file ...]
```

其中，file表示要处理的文件的文件名列表，如果是多个文件，则文件名之间用空格隔开。

注意的，这个命令是把各行反转，行的顺序仍然不变。



# pr命令格式化文本页

pr命令是一个非常有用的工具，其功能主要是将文本文件的内容转换成适合打印的格式

基本语法：

```powershell
pr [option]... [file]...
```

命令选项：

- -column：指定输出的栏数，默认值为1。
- -a：修改-column的显示效果，水平创建栏，与-column选项配合使用。
- -d：产生两个空格的输出。
- -F或者-f：使用换页符代替换行符实现分页。
- -h：指定页眉，如果没有指定，则默认使用文件名作为页眉。
- -l：指定每页的行数，默认为66行。
- -o：指定每行的缩进的字符数量。
- -w：指定页面宽度，默认为72个字符。



# sort命令对文本排序

Shell中的sort命令有3种执行模式，分别为排序文本、检查文件是否已经排序以及合并文件。

基本语法：

```powershell
sort [option]... [file]...
```

命令选项：

- -b：忽略前导空格或者制表符，找出第一个非空格字符。
- -c：测试文件是否已经排序。
- -d：根据字典顺序排序。该选项仅比较数字、字母和空格等字符。
- -f：忽略大小写。将小写字母转成大写字母后参与比较。
- -i：仅仅比较可打印字符。
- -n：根据算术值进行比较，参与比较的字符有空格、十进制数字，以及减号等。如果对非数值字符进行算术值比较，将会产生无法预知的结果。
- -R：根据哈希值随机排序。
- -r：颠倒排序结果
- -k：定义排序关键字。
- -m：仅仅合并已经排好序的文件，不执行排序操作。
- -o：将排序结果写入文件，而不是标准输出设备。
- -t：指定字段分隔符。默认值为连续的空格或者制表符。
- -u：删除重复的行，只保留第一个。

注意：
<font color=red>sort命令中，一个文本行最多只能包括10列</font>

## 使用关键字排序

如果不指定任何选项，则sort命令会根据整个文本行进行排序，文本行中的所有的列都会参与排序。但是，在某些情况下，用户可能不需要所有的列都进行比较，而只是根据其中的某几个列进行排序。对于这种情况，用户可以使用-k选项来定义排序关键字。

### 基本使用

```powershell
-k pos1[,pos2]
```

其中，pos1表示排序关键字的起始位置，pos2表示排序关键字的结束位置，这两者之间用逗号隔开。通常情况下，组成排序关键字都是以列为单位的。此时，post1和pos2就是关键字的起始列和结束列的列号。列号从1开始，即第1列为1，第2列为2，依此类推。

在通过关键字排序的时候，sort命令首先会根据关键字中的第1个列排序，如果关键字的第1个列相同，则会根据关键字中的第2个列排序，依此类推。

示例：

```powershell
sort -k 2,3 sort.txt
```

### 省略终止列

```powershell
-k pos
```

如果用户使用上面的语法省略了终止列，那么会从pos指定的列开始，一直比较到行尾。

### 指定开始列字符和终止列字符

```powershell
-k pos1[.start][,pos2.[end]]
```

示例：

```powershell
sort -k 1.2,1.3 sort.txt
```

### 根据指定列排序

```powershell
-k pos, pos
```

当pos1和pos2一样的时候，就是根据指定的列排序了。

### 数值列的排序

默认情况下，sort命令会将所有的列看做字符串，并且按照字符串的排序规则进行排序。为了使sort命令能够正确处理数值字段，用户需要使用-n选项或者修饰符n。



## 使用sort命令合并文件

基本语法：

```powershell
sort file1,file2 ....
```



# 文本统计

## 输出带行号的文本行

在Shell中，有许多命令都可以输出行号，其中包括cat、grep等。

**显示所有行号**

```powershell
cat -n file
```

**显示匹配行行号**

```powershell
grep -n patten file # 输出匹配的文本所在行
```

## 统计行数

用户可以使用grep及wc等命令来统计文本行的数量

**统计匹配行行数 **

```powershell
grep -c patten file
```

**统计所有文本行**

```powershell
wc -l file
```



# wc命令统计文本

wc命令是Shell中用来对文本进行各种统计的命令

基本语法：

```powershell
wc [option]... [file]...
```

选项：

- -c：统计文本的字节数。
- -m：统计字符数。
- -l：统计行数。
- -L：统计最长行的长度。
- -w：统计单词数。



# cut命令选取文本列

cut命令用于从文件中取出指定的列

基本语法：

```powershell
cut option... [file]...
```

命令选项:

- -b：只选择指定的字节
- -c：只选择指定的字符。
- -d：自定义列分隔符，默认值为制表符。
- -f：只选择列表中指定的文本列，文本列用列号表示，多个列之间用逗号隔开。
- -n：取消分隔多字节字符。
- -s：不输出不包含列分隔符的行。

## 选取指定的文本列

通过-f后面指定列号来指定，如：

```powershell
 cut  -f 1 -d " " sort.txt 
```

可以使用的方式如下：

```powershell
-f 1,6 #指定第1,6列
-f 1-6 #指定1~6列
-f 3- #从第三列到最后
-f 1,2,4-5 #选择1,2,列以及4到5列
-f -2 #选取前2列
```

## 选择指定数量的字符

用户还可以通过cut命令从每一行中选择指定数量的字符。在选择字符时，cut命令的语法如下。

```powershell
cut -c list
```

list表示范围，和-f选项的一致。



# paste命令拼接文本列

paste命令的功能恰好与cut命令相反。该命令的主要功能是将某些文件的文本行并行地连接在一起，形成一个新的文件。

基本语法：

```powershell
paste [option]... [file]..
```

选项：

- -d：指定拼接结果中列分隔符。默认情况下paste命令生成的文件使用制表符分隔列。
- -s：将多个文件串行地拼接在一起，即将后面文件的内容追加到前面一个文件的后面。



# join命令联接文本列

join命令就是用来联接这些文本文件中的数据行的，它是根据参与联接的两个文本文件的公共列来联接数据行。

基本语法：

```powershell
join [option]... file1 file2
```

选项：

- -1 field：根据第1个文件的指定列进行联接。其中参数field用来指定第1个文件中用来联接的关键字列。
- -2 field：根据第2个文件的指定列进行联接。其中参数field用来指定第2个文件中用来联接的关键字列。
- -a filenum：指定是否输出不匹配的行。其中参数filenum可以取值为1或者2，分别代表参与联接的第1个文件和第2个文件。可以指定多次
- -e string：使用参数string指定的字符串代替空列。
- -i：在比较关键字时忽略大小写。
- -o：自定义输出列。
- -t：自定义列分隔符。
- -v filenum：-a相同，但是只显示文件中没有相同栏位的行；

注意事项：

- 在默认情况下，join命令会将两个文件的第1列作为关键字列进行比较
- 参与联接的两个文件必须按照关键字排序，否则会出现错误。但是用户可以通过指定--nocheck-order选项来使join命令不检查文件是否按照关键字排序。
- 默认情况下，join是内连接，我们可以通过-a 来实现左连接、右连接、全连接



## 自定义输出列

在默认情况下，join命令会输出参与联接的两个文件的所有的列。但是，在某些情况下，用户可能并不需要得到所有的列，就可以使用-o选项来指定要输出的列的清单。-o选项可以接受一个字段的列表。

基本语法：

```powershell
filenum.field
```

其中，filenum表示文件号，可以取值为1或者2，分别代表第1个和第2个文件。field代表要输出的列的列号，为一个十进制数字。文件号和列号之间用圆点连接起来，组成一个整体，代表某个文件的第几列。如果同时指定了多个列，则多个列之间用空格隔开

示例：

```powershell
join -1 2 -2 1 -o 1.3 2.2 j1.txt j2.txt
```



# tr命令替换文件内容

tr的功能是转换或者删除指定的字符，tr命令不能直接从文件中读取数据，只能从标准输入获取数据，并且将处理结果写到标准输出设备

基本语法：

```powershell
tr [option]... set1 [set2]
```

选项：

- -c：用字符集set2替换字符集set1中没有包含的字符。
- -d：删除字符集set1中的所有字符，不执行替换操作。
- -s：压缩set1中重复的字符。
- -t：将字符集set1用set2转换

其中字符集可以使用的如下：

- [a-z]：所有的小写字母。
- [A-Z]：所有的大写字母。
- [0-9]：单个数字。
- /octal：一个三位的八进制数，对应有效的ASCII字符。
- [char*n]：表示字符char重复出现指定次数n。另外，tr命令还支持字符类
- [:alnum:]：所有字母字符与数字。
- [:alpha:]：所有字母字符。
- [:blank:]：所有水平空格。
- [:cntrl:]：所有控制字符。
- [:digit:]：所有数字。
- [:graph:]：所有可打印的字符，不包含空格符。
- [:lower:]：所有小写字母。
- [:print:]：所有可打印的字符，包含空格。
- [:punct:]：所有标点字符。
- [:space:]：所有水平与垂直空格符。
- [:upper:]：所有大写字母。
- [:xdigit:]：所有十六进位制的数字

## 压缩重复字符

示例：

```powershell
tr -s [a-z] < tr1.txt 
```

## 删除空行

示例：

```powershell
tr -s "\n" < tr1.txt
```

## 小写转大写

```powershell
tr [a-z] [A-Z] < tr1.txt 
或
tr -t [a-z] [A-Z] < tr1.txt
```

## 删除指定字符

```powershell
tr -d [y] < tr1.txt # 删除y
tr -d [0-9] < tr1.txt # 删除数字
```

