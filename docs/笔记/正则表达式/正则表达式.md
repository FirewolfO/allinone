## 简介

正则表达式(Regular Expression)是一种文本模式，包括普通字符（例如，a 到 z 之间的字母）和特殊字符（称为"元字符"）。正则表达式使用单个字符串来描述、匹配一系列匹配某个句法规则的字符串。



## 元字符

在正则表达式中，定义了很多的元字符，这些字符都有相应的意义，主要有如下几类：

### 普通字符

普通字符包括没有显式指定为元字符的所有可打印和不可打印字符。这包括所有大写和小写字母、所有数字、所有标点符号和一些其他符号。

#### 打印字符

打印字符，说白了，就是能显示出来的，如：一个字符、一个数字，等等

| 字符 | 描述                                                         |
| :--- | ------------------------------------------------------------ |
| \d   | 匹配一个数字字符。等价于 [0-9]。                             |
| \D   | 匹配一个非数字字符。等价于 [^0-9]。                          |
| \w   | 匹配字母、数字、下划线。等价于[A-Za-z0-9_]。                 |
| \W   | 匹配非字母、数字、下划线。等价于 `[^A-Za-z0-9_]`             |
| \xn  | 匹配 n，其中 n 为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如，'\x41' 匹配 "A"。'\x041' 则等价于 '\x04' & "1"。正则表达式中可以使用 ASCII 编码。 |
| \un  | 匹配n，其中 n 是一个用四个十六进制数字表示的 Unicode 字符。例如， \u00A9 匹配版权符号 (?) |

#### 非打印字符

除了一些打印字符之外，还有一些字符是不会显示出来的， 比如换行符、制表符等等；

| 字符 | 描述                                                         |
| ---- | ------------------------------------------------------------ |
| \f   | 匹配一个换页符。等价于 \x0c 和 \cL。                         |
| \n   | 匹配一个换行符。等价于 \x0a 和 \cJ。                         |
| \r   | 匹配一个回车符。等价于 \x0d 和 \cM。                         |
| \s   | 匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。注意 Unicode 正则表达式会匹配全角空格符。 |
| \S   | 匹配任何非空白字符。等价于 [^ \f\n\r\t\v]。                  |
| \t   | 匹配一个制表符。等价于 \x09 和 \cI。                         |
| \v   | 匹配一个垂直制表符。等价于 \x0b 和 \cK                       |
| \cx  | 匹配由x指明的控制字符。例如， \cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 'c' 字符。 |

### 特殊字符

所谓特殊字符，就是一些有特殊含义的字符，如 `*`，简单的说就是表示任何字符串的意思，许多元字符要求在试图匹配它们时特别对待。若要匹配这些特殊字符，必须首先使字符"转义"，即，将反斜杠字符**\** 放在它们前面

| 特殊字符 | 描述                                                         |
| :------- | :----------------------------------------------------------- |
| ^        | 匹配输入字符串的开始位置，除非在方括号表达式中使用，当该符号在方括号表达式中使用时，表示不接受该方括号表达式中的字符集合，相当于取反。 |
| $        | 匹配输入字符串的结尾位置。如果设置了 RegExp 对象的 Multiline（多行） 属性，则 $ 也匹配 '\n' 或 '\r'。 |
| ( )      | 标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用 |
| .        | 匹配除换行符 \n 之外的任何单字符。要匹配 . ，请使用 \. 。    |
| []       | 一组字符中的任何一个出现即可，如[abc]则表示a或者b或者c       |
| \        | 将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， 'n' 匹配字符 'n'。'\n' 匹配换行符。 |
| {}       | 用来写限定符，如{1,5}，则表示字符出现1到5次之间都可以匹配    |
| \|       | 指明两项之间的一个选择，如：1\|9表示1或者是9                 |
| -        | 用在[]中表示范围，如：[0-8]表示匹配0到8之间的任何字符，包含0和8 |

### 限定符（量词）

限定符用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配

| 字符  | 描述                                                         |
| :---- | :----------------------------------------------------------- |
| *     | 匹配前面的子表达式零次或多次。例如，zo* 能匹配 "z" 以及 "zoo"。* 等价于{0,}。 |
| +     | 匹配前面的子表达式一次或多次。例如，'zo+' 能匹配 "zo" 以及 "zoo"，但不能匹配 "z"。+ 等价于 {1,}。 |
| ?     | 匹配前面的子表达式零次或一次。例如，"do(es)?" 可以匹配 "do" 、 "does" 中的 "does" 、 "doxy" 中的 "do" 。? 等价于 {0,1}。 |
| {n}   | n 是一个非负整数。匹配确定的 n 次。例如，'o{2}' 不能匹配 "Bob" 中的 'o'，但是能匹配 "food" 中的两个 o。 |
| {n,}  | n 是一个非负整数。至少匹配n 次。例如，'o{2,}' 不能匹配 "Bob" 中的 'o'，但能匹配 "foooood" 中的所有 o。'o{1,}' 等价于 'o+'。'o{0,}' 则等价于 'o*'。 |
| {n,m} | m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。例如，"o{1,3}" 将匹配 "fooooood" 中的前三个 o。'o{0,1}' 等价于 'o?'。请注意在逗号和两个数之间不能有空格。 |

### 定位符

定位符使您能够将正则表达式固定到行首或行尾。它们还使您能够创建这样的正则表达式，这些正则表达式出现在一个单词内、在一个单词的开头或者一个单词的结尾。

定位符用来描述字符串或单词的边界，**^** 和 **$** 分别指字符串的开始与结束，**\b** 描述单词的前或后边界，**\B** 表示非单词边界。

| 字符 | 描述                                                         |
| :--- | :----------------------------------------------------------- |
| ^    | 匹配输入字符串开始的位置。如果设置了 RegExp 对象的 Multiline 属性，^ 还会与 \n 或 \r 之后的位置匹配。 |
| $    | 匹配输入字符串结尾的位置。如果设置了 RegExp 对象的 Multiline 属性，$ 还会与 \n 或 \r 之前的位置匹配。 |
| \b   | 匹配一个单词边界，即字与空格间的位置。                       |
| \B   | 非单词边界匹配。                                             |

### 字符优先级

正则表达式从左到右进行计算，并遵循优先级顺序，这与算术表达式非常类似。

相同优先级的从左到右进行运算，不同优先级的运算先高后低。下表从最高到最低说明了各种正则表达式运算符的优先级顺序：

| 运算符                      | 描述                                                         |
| :-------------------------- | :----------------------------------------------------------- |
| \                           | 转义符                                                       |
| (), (?:), (?=), []          | 圆括号和方括号                                               |
| *, +, ?, {n}, {n,}, {n,m}   | 限定符                                                       |
| ^, $, \任何元字符、任何字符 | 定位点和序列（即：位置和顺序）                               |
| \|                          | 替换，"或"操作 字符具有高于替换运算符的优先级，使得"m\|food"匹配"m"或"food"。若要匹配"mood"或"food"，请使用括号创建子表达式，从而产生"(m\|f)ood"。 |



## 贪婪匹配与非贪婪匹配

贪婪匹配：`*` 和`+`都是贪婪匹配的，因为他们会尽可能多的匹配文字，如：如果使用 \d+来匹配333f，则只能匹配出一个：333。

非贪婪匹配：`?` 是非贪婪匹配，如：使用\d?来匹配333f，则能匹配出5个：3、3、3、f、末尾符

贪婪匹配转非贪婪匹配：如果需要把贪婪匹配转成非贪婪匹配，则只需要在`+`或者`*`的后面加上`?`即可，如：使用\d+?来匹配333f，则匹配出3个结果：3、3、3



## 捕获组

捕获组是把多个字符当一个单独单元进行处理的方法，它通过对括号内的字符分组来创建。

例如，正则表达式 (dog) 创建了单一分组，组里包含"d"，"o"，和"g"。

捕获组是通过从左至右计算其开括号来编号。例如，在表达式（（A）（B（C））），有四个这样的组：

- ((A)(B(C)))
- (A)
- (B(C))
- (C)

可以通过下面这种方式直接引用分组中捕获的内容

| 字符 | 含义                                                         |
| ---- | ------------------------------------------------------------ |
| \n   | 标识一个八进制转义值或一个向后引用，如果\n之前至少有n个后去的子表达式，则表示对所获取的匹配的引用。例如，'(.)\1' 匹配两个连续的相同字符。\1 拿到的的是第一个匹配组中的内容。否则，如果 n 为八进制数字 (0-7)，则 n 为一个八进制转义值 |

注意的是，\0表示的是所有内容。另外，\n匹配的是前面已经匹配到的内容，如：

([a-z])\1能够匹配 aab中的aa，却不能匹配abc，



## 零宽断言

零宽断言用于查找在某些内容(但并不包括这些内容)之前或之后的东西，也就是说它们像 \b ^ $ \< \> 这样的锚定作用，仅仅用于指定一个位置，不参与内容匹配，这个位置应该满足一定的条件(即断言)，因此它们也被称为零宽断言。 断言用来声明一个应该为真的事实。正则表达式中只有当断言为真时才会继续进行匹配。零宽断言有如下几种：

| 字符     | 描述                                  | 示例                                                         |
| -------- | ------------------------------------- | ------------------------------------------------------------ |
| (?=exp)  | 断言自身出现的位置后面能匹配表达式exp | 要匹配 cooking ，singing ，doing中除了ing之外的内容，只取cook, sing, do的内容，这时候的增则表达式可以用 `[a-z]*(?=ing)` 来匹配 |
| (?<exp)  | 断言自身位置的前面能匹配表达式exp     | 例如 `(?<=abc).*` 可以匹配 abcdefg 中的 defg                 |
| (?!exp)  | 断言此位置的后面不能匹配表达式exp     | 对于字符串abcdef，如果使用ab(?!def)则能匹配到ab，如果使用abc(?!def)则匹配不到abc |
| (?<!exp) | 断言此位置的前面不能匹配表达式exp     | 对于字符串abcdef，若使用(?<!abc)def来匹配，则匹配不到def，如果使用(?<!abc)ef来匹配，则能匹配到ef |



# 特殊含义

- [char*n]：表示字符char重复出现指定次数n。
- [:alnum:] 字母和数字
- [:alpha:] 代表任何英文大小写字符，亦即 A-Z, a-z
- [:lower:] 小写字母 [:upper:] 大写字母
- [:blank:] 空白字符（空格和制表符）
- [:space:] 水平和垂直的空白字符（比[:blank:]包含的范围广）
- [:cntrl:] 不可打印的控制字符（退格、删除、警铃...）
- [:digit:] 十进制数字 [:xdigit:]十六进制数字
- [:graph:] 可打印的非空白字符
- [:print:] 可打印字符
- [:punct:] 标点符号
- [:xdigit:]：所有十六进位制的数字



## Java使用正则

这里简单给出一个编译表达式以及匹配字符串的例子如下：

```java
public class RegularTest {

    public static void main(String[] args) {

        // 编译表达式
        Pattern pattern = Pattern.compile("^[a-z]*\\d+$");

        // 匹配字符串
        Matcher matcher = pattern.matcher("abc123we");
        System.out.println(matcher.matches());
        
    }
}
```



## 常用正则

1. QQ号码：
2. 手机号码：`^1[34578]\d{9}$`
3. 中文字符：`[\u4e00-\u9fa5]`
4. 邮箱：
