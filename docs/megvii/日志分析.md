## 按照时间截取日志文件

```powershell
 sed -n '/2020-06-16 17:28/,/2020-06-16 17:35/'p adapter_def.log  > lx.log
```

## 根据字段截取

这里以截图记录中唯一trackId为例

```powershell
cat lx.log | grep "receive message from" | awk -F 'trackId=' '{print $2}' | awk -F ',' '{if(length !=0) print $1}' | sort | uniq
```



```java
[ERROR] Errors: 
[ERROR]   EventConfigServiceTest.getAllConfig:34 ? ClassCast com.alibaba.fastjson.JSONOb...
[ERROR]   EventDeviceServiceImplTest.selectOne:62 NullPointer

```





```java
package com.megvii.ebg.pangu.starter.chart.enums;

import com.megvii.ebg.pangu.starter.chart.entities.LevelPercentRule;
import com.megvii.ebg.pangu.starter.chart.entities.Trend;
import org.apache.commons.collections4.CollectionUtils;

import java.util.Arrays;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

/**
 * 描述：图表所在场景枚举
 * Author：liuxing
 * Date：2020-11-28
 */
public enum ChartSceneEnum {
    
    ;

    ChartSceneEnum(String key, String description, String keysDesc) {
        this(key, description, keysDesc, ChartTypeEnum.ONE_DAY_TOTAL, null, null);
    }

    /**
     * 用于构造通用场景
     *
     * @param key
     * @param description
     * @param keysDesc
     * @param countType
     */
    ChartSceneEnum(String key, String description, String keysDesc, ChartTypeEnum countType) {
        this(key, description, keysDesc, countType, null, null);
    }

    /**
     * 构造趋势场景
     *
     * @param key
     * @param description
     * @param keysDesc
     * @param countType
     * @param trend
     */
    ChartSceneEnum(String key, String description, String keysDesc, ChartTypeEnum countType, Trend trend) {
        this(key, description, keysDesc, countType, null, trend);
    }

    /**
     * 用于构造百分比场景
     *
     * @param key
     * @param description
     * @param keysDesc
     * @param countType
     * @param percentRules
     */
    ChartSceneEnum(String key, String description, String keysDesc, ChartTypeEnum countType, List<LevelPercentRule> percentRules) {
        this(key, description, keysDesc, countType, percentRules, null);
    }

    /**
     * 全量构造器
     *
     * @param key
     * @param description
     * @param keysDesc
     * @param countType
     * @param percentRules
     * @param trend
     */
    ChartSceneEnum(String key, String description, String keysDesc, ChartTypeEnum countType, List<LevelPercentRule> percentRules, Trend trend) {
        this.key = key;
        this.description = description;
        this.keysDesc = keysDesc;
        this.countType = countType;
        this.percentRules = percentRules;
        this.trend = trend;
    }

    /**
     * 场景key
     */
    private String key;
    /**
     * 场景描述
     */
    private String description;
    /**
     * 数据各种key的描述，多级之间请使用;隔开
     */
    private String keysDesc;

    /**
     * 统计的数据类型：实时数据、历史数据
     */
    private ChartTypeEnum countType;

    /**
     * 计算百分比的规则，为null表示不进行百分比计算
     */
    private List<LevelPercentRule> percentRules;

    /**
     * 趋势参数，为null表示不是趋势
     */
    private Trend trend;
}
```

```
1.0.2-main-SNAPSHOT
```