1. 提供其他统一路由路径，通过pluginType来进行区分，如果没有指定pluginType，则走原始逻辑，否则映射到对应的插件逻辑；
2. 通过不同的pluginType引用不同的扩展点，进行不同的业务逻辑处理；
3. 提供一些公共的，主线使用较多的默认功能，比如：数据持久化等，插件不提供的时候，则可以使用默认的方式
4. 为插件开发者提供统一的sdk，用于暴露主线扩展点已经主线可复用功能；
5. 把扩展点的粒度可以多分几个级别，供插件开发者灵活集成；
6. PluginEngine，用于装载或者卸载系统中已经引入的插件。



注意考虑OpenAPI



## 插件开发主线

- 主线业务框架抽象
- 主线基础组件
- 主线工具
- 开发规范文档、工具使用文档、基础组件文档
- 项目目录结构、文件格式约束 ---> 项目骨架、脚手架
- 插件开发联调环境准备



## 插件开发者

- 了解业务框架业务流程
- 





## 插件打包

- 业务插件
  - Jar：打包脚本
  - Web服务：目录结构定义、基础镜像、Dockerfile、构建脚本、编排工具（基础的编排文件+文档）
- 前端插件
  - 静态资源包
- Core
  - 算法仓limbo服务

提供方式

1. 短期：各自打包，统一命名规范；
2. 长期：合并插件包，统一管理，至少保证前端和业务插件的合并；



## 插件管理引擎

### 插件加载

- jar包、静态资源分发；
- 类加载，引入插件信息
- web服务nacos注册、路由转发

### 状态管理

- 收集插件信息
- 根据插件状态激活、禁止插件功能；
- 卸载插件



## 插件包共享平台

- 插件包存储、上传、下载、信息维护
- 授权管理



## 其他

整个插件打包： 前端 + 后端 + limbo   可以复用产品



# 短期

## 插件开发

主线框架

- 提供粗粒度的扩展点：把ppl留给插件开发者实现；
- 提供少量的系统扩展
- 提供较全面的sdk，可以供插件访问系统信息
- 规范项目结构、文件内容



插件开发者

- 不用关心主线的ppl，根据主线暴露的扩展点进行扩展
- 较多的业务实现
- 按照规范组织项目
- 



## 插件部署

支持少量的部署方式：

- 前后端各自分开打包，拷贝到相应的服务器指定目录
- web服务情况，根据基础打包编排构建相应的镜像，导入到devops启动注册



## 插件管理

- 文件服务器 、 SDC

- 文件命名规范；

- 插件文档规范

  

## 效果

- 新的算法接入的时候，不用污染主线流程，不需要，大量的回归测试
- 多个告警类型接入的时候，插件开发者可以进行自己的业务抽象，减少工作量
- 插件开发者需要学习主线提供的基础组件文档、扩展点定义，有学习成本



# 长期

## 插件开发

主线框架

- 提供了大量灵活的扩展点
- 提供了大量的系统扩展点实现，可供插件开发者选择使用
- 提供配置式的插件开发方式
- 丰富的sdk
- 完备的开发文档



插件开发者

- 只需要少量的开发甚至只需要简单的配置
- 可以方便的进行调试验证





