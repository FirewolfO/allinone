## 业务框架

### 开发

#### 插件接口

- 定义扩展点 

  - 布控管理（crud）
  - 警戒记录（crud）
  - 告警mq处理ppl
  - 事件生成

- 系统扩展点实现 | 默认扩展点

- 配置管理：读取解析配置（配置式）

  

#### web接口

- 警戒记录（crud）
- 布控接口（crud）
- 插件管理接口（crud）



#### 业务流程

- 布控流程
- 识别告警流程



#### 表设计

- 布控表
  - id
  - uuid
  - zone_id
  - device_id
  - device_set_id：
  - device_name：设备名
  - control_type：布控类型：1-警戒类型布控，2-全局屏蔽区域布控
  - source_type：数据源类型：1：警戒相机，2：警戒算法仓
  - alarm_type：警戒类型，1：人员越界，2：人员入侵，3：车辆越界，31：机动车越界，32：非机动车越界，33：机动车和非机动车越界，4：车辆禁停，41：机动车禁停，42：非机动车禁停，43：机动车和非机动车禁停，5：人员越界-翻墙检测，6：人员徘徊，7：机动车离开，8：非机动车离开，9：机动车和非机动车离开,10：人员值岗/离岗-离岗，11：人员值岗/离岗-超员，12：人员值岗/离岗-少员，13：人员奔跑，14：摔倒检测，15：人员扭打，16：抽烟检测，17：看手机，18：接打电话，19：人员聚众，20：防碰撞预警，21：车辆逆行

- 告警记录   
  - es
  - mysql
    - id
    - uuid
    - zone_id
    - zone_name
    - capture_image_uri
    - whole_image_uri
    - alarm_type_id
    - alarm_type_name
    - device_id
    - device_set_id
    - device_name
    - alarm_time
    - nvr_id
    - channel_no
- 插件信息维护



## 第三方

### 开发

- 编程式

  实现扩展点

- 配置式

  选择系统扩展点

  