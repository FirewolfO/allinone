### 建库脚本

```sql
create table `pangu-base`.`event_type`(
	`id` bigint(20) NOT NULL,
	`uuid` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL unique COMMENT "对外唯一键",
	`name` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT "事件类型名称",
	`code` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT "事件类型编码",
	`busi_type` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT "业务类型，多个之间使用逗号隔开",
	`parent_id` bigint(20) COMMENT "父类型ID",
	`auth_code` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT "授权编码",
  `envs` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT "pangu,lite" COMMENT "支持的环境，多个之间使用逗号分隔，目前支持pangu、pangu_yy、pangu_xinghe、pangu_haihe",
  `position` int(11) COMMENT "展示位置，越大越靠后",
	`is_show` tinyint(1) COMMENT "是否对外可见：0-隐藏，1-显示",
	`gmt_create` datetime DEFAULT CURRENT_TIMESTAMP,
  `gmt_modified` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT="事件类型字典表";

```

### 预置数据

```sql
INSERT INTO `event_type` values (110,"db4df84c5fac4f7aa0cde3987f23c34d","测试脚本","testScrpipt","1",100,"security_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",10,1,now(),now());

INSERT INTO `event_type` values (100,"6d6d8e03f95c451e9a780b284c0bf5fc","人员管控","person","1",0,"security_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",20,1,now(),now());
INSERT INTO `event_type` values (101,"ac87e89e8f6b49faac3b7faa2a0cf2b4","重点人员","keyPointPerson","1",100,"security_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",20,1,now(),now());
INSERT INTO `event_type` values (102,"57700d26f94d418a9f0f8ae4e878d037","全局陌生人员","strangePerson","1",100,"security_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",40,1,now(),now());
INSERT INTO `event_type` values (103,"295ae4e37d2741d996e708c93595c6e2","高频重点人员","highCountKeyPointPerson","1",100,"security_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",60,1,now(),now());
INSERT INTO `event_type` values (104,"4229bfedc95c43a586a299314b26ebfe","员工","personStaff","1",100,"security_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",80,1,now(),now());
INSERT INTO `event_type` values (105,"fe93196d1560476594596c48beb320e5","访客","personVisitor","1",100,"security_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",100,1,now(),now());
INSERT INTO `event_type` values (106,"2dbe47e8ebbe4254be5879d0173a7770","通道陌生人","passageStrangePerson","1",100,"security_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",120,1,now(),now());


INSERT INTO `event_type` values (200,"f7f1a4da8f3446b1b34f2c135975de46","车辆管控","vehicle","2",0,"security_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",40,1,now(),now());
INSERT INTO `event_type` values (201,"d45bcbf4b3b547faa0ebee8f2f8dc022","重点车辆","keyPointVehicle","2",200,"security_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",20,1,now(),now());
INSERT INTO `event_type` values (202,"425f4b95fdf84a20810deaea5d4d6b40","陌生车辆","strangeVehicle","2",200,"security_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",40,1,now(),now());
INSERT INTO `event_type` values (203,"c79d15e9698146bdb6c0a20d9e065133","已知车辆","knowVehicle","2",200,"security_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",60,0,now(),now());
INSERT INTO `event_type` values (204,"87c550c6ed774cc9afffd30de936896b","访客车辆","visitorVehicle","2",200,"security_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",80,0,now(),now());
INSERT INTO `event_type` values (205,"45f0d39548ad40e7a4f33178bae5a8d9","员工车辆","employeeVehicle","2",200,"security_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",100,0,now(),now());


INSERT INTO `event_type` values (300,"43e5db5eafb24630af1f9f81afa90ed1","区域告警","areaWarn","3",0,"zone_controll_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",60,1,now(),now());
INSERT INTO `event_type` values (301,"a8d8cde02fa6433c92697ebd2e126b6a","人员入侵","personInbreak","3",300,"zone_controll_model,alarm_type_border","pangu,pangu_xinghe,pangu_haihe,pangu_yy",20,1,now(),now());
INSERT INTO `event_type` values (302,"79126bf65eb44619b9c5145e4dbf7626","人员越界","personCrossBorder","3",300,"zone_controll_model,alarm_type_border","pangu,pangu_xinghe,pangu_haihe,pangu_yy",40,1,now(),now());
INSERT INTO `event_type` values (303,"5da24b8b050545c1af0247bb54edb151","车辆越界","vehicleCrossBorder","3",300,"zone_controll_model,alarm_type_border","pangu,pangu_xinghe,pangu_haihe,pangu_yy",60,1,now(),now());
INSERT INTO `event_type` values (304,"1941b9e8577f48fc8811fbe05810a463","车辆禁停","vehicleForbidStop","3",300,"zone_controll_model,alarm_type_border","pangu,pangu_xinghe,pangu_haihe,pangu_yy",80,1,now(),now());
INSERT INTO `event_type` values (305,"f0808e801d254ed3bb1658e554fde56b","人员越界-翻墙检测","personCrossBorderOverWall","3",300,"zone_controll_model,alarm_type_border","pangu,pangu_yy",100,1,now(),now());
INSERT INTO `event_type` values (306,"3b96ae25910643c2bd05f1572aa0d031","机动车越界","vehicleCrossBorderMotor","3",300,"zone_controll_model,alarm_type_border","pangu,pangu_yy",120,1,now(),now());
INSERT INTO `event_type` values (307,"582fc82763c9464481bd0058d8ed422b","非机动车越界","vehicleCrossBorderNoMotor","3",300,"zone_controll_model,alarm_type_border","pangu,pangu_yy",140,1,now(),now());
INSERT INTO `event_type` values (308,"aac83a01b0514203bedd95ba4a3acabe","机动车禁停","vehicleForbidStopMotor","3",300,"zone_controll_model,alarm_type_border","pangu,pangu_yy",160,1,now(),now());
INSERT INTO `event_type` values (309,"ab54712b8f44480f9e0fed6513cf72ee","非机动车禁停","vehicleForbidStopNoMotor","3",300,"zone_controll_model,alarm_type_border","pangu,pangu_yy",180,1,now(),now());
INSERT INTO `event_type` values (310,"39a6c9eaddc84b0680e47903c9b63f6b","机动车离开","vehicleLeaveMotor","3",300,"zone_controll_model,alarm_type_border","pangu,pangu_yy",200,1,now(),now());
INSERT INTO `event_type` values (311,"829da5a91f6c470ba30b59ee7dee6e23","非机动车离开","vehicleLeaveNoMotor","3",300,"zone_controll_model,alarm_type_border","pangu,pangu_yy",220,1,now(),now());
INSERT INTO `event_type` values (312,"fafc478046bd4ba5be82497cba9279e8","人员徘徊","personHover","3",300,"zone_controll_model,alarm_type_border","pangu,pangu_yy",240,1,now(),now());
INSERT INTO `event_type` values (313,"0ea61541e65648fb933d4f189a0d5898","人员值岗/离岗","personOnOffDuty","3",300,"zone_controll_model,alarm_type_action","pangu,pangu_xinghe,pangu_haihe,pangu_yy",260,1,now(),now());
INSERT INTO `event_type` values (314,"5634aa1ed6d042808cf653b4d9ac5b0d","人员奔跑","personRun","3",300,"zone_controll_model,alarm_type_action","pangu,pangu_xinghe,pangu_haihe,pangu_yy",280,1,now(),now());
INSERT INTO `event_type` values (315,"473becef5b7c4c43b352062ad1a5ddb5","人员摔倒","personFall","3",300,"zone_controll_model,alarm_type_action","pangu,pangu_xinghe,pangu_haihe,pangu_yy",300,1,now(),now());
INSERT INTO `event_type` values (316,"b3f07ee6de4842219cd667a3c8b3d0e5","人员扭打","personFight","3",300,"zone_controll_model,alarm_type_action","pangu,pangu_xinghe,pangu_haihe,pangu_yy",320,1,now(),now());
INSERT INTO `event_type` values (317,"8889356fded042df9334c57e13ed0c1e","抽烟","personSmoke","3",300,"zone_controll_model,alarm_type_action","pangu,pangu_xinghe,pangu_haihe,pangu_yy",340,1,now(),now());
INSERT INTO `event_type` values (318,"561d285554cd40acbb3e08d867de64ea","看手机","personWatchMobile","3",300,"zone_controll_model,alarm_type_action","pangu,pangu_xinghe,pangu_haihe,pangu_yy",360,1,now(),now());
INSERT INTO `event_type` values (319,"d1119ab28dae41e599a3ac6246b35efe","接打电话","personAnswerPhone","3",300,"zone_controll_model,alarm_type_action","pangu,pangu_xinghe,pangu_haihe,pangu_yy",380,1,now(),now());
INSERT INTO `event_type` values (320,"2e69ff3937134aadb0d7de1cae06c050","人员聚众","personGather","3",300,"zone_controll_model,alarm_type_action","pangu,pangu_xinghe,pangu_haihe,pangu_yy",400,1,now(),now());
INSERT INTO `event_type` values (321,"f41b2aff3b4944b697bb8f3de0a1964d","车辆逆行","vehicleRetrograde","3",300,"zone_controll_model,alarm_type_border","pangu,pangu_xinghe,pangu_haihe,pangu_yy",420,1,now(),now());
INSERT INTO `event_type` values (322,"d83cfddaed91450e90b5d0a1f23e0c27","防碰撞预警","antiCollision","3",300,"zone_controll_model,alarm_type_border","pangu,pangu_xinghe,pangu_haihe,pangu_yy",440,1,now(),now());
INSERT INTO `event_type` values (323,"a3b1f4a5f36e421685391e9cc635d7c0","人员值岗/离岗-超员","overStaffing","3",300,"zone_controll_model,alarm_type_action","pangu,pangu_xinghe,pangu_haihe,pangu_yy",460,1,now(),now());
INSERT INTO `event_type` values (324,"7910d3f7bda94dc58a63176207e1d183","人员值岗/离岗-少员","shortage","3",300,"zone_controll_model,alarm_type_action","pangu,pangu_xinghe,pangu_haihe,pangu_yy",480,1,now(),now());
INSERT INTO `event_type` values (325,"2309dc04c6ed4789a8572af1833d2274","睡岗检测","sleepDuty","3",300,"zone_controll_model,alarm_type_action","pangu,pangu_xinghe,pangu_haihe,pangu_yy",500,1,now(),now());


INSERT INTO `event_type` values (4000,"282662ffdfbb41e1b21216a17206776b","设备事件","device","4",0,"pass_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",80,1,now(),now());
INSERT INTO `event_type` values (4001,"2481bdb9bb484564b4de54f6cc20676b","所有设备","allDevice","4",4000,"pass_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",20,1,now(),now());
INSERT INTO `event_type` values (4002,"0adff0db6a094901b6b7f294d80b41c9","设备离线","deviceOffline","4",4001,"pass_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",20,1,now(),now());
INSERT INTO `event_type` values (400,"b0593fce807a4488b6a2d606979b7421","门禁设备","doorControl","4",4000,"pass_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",40,1,now(),now());
INSERT INTO `event_type` values (401,"a1056ec32c5446f2aabbfc84ce609787","设备拆除","deviceTear","4",400,"pass_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",20,1,now(),now());
INSERT INTO `event_type` values (402,"d51b6632f70b4b2ebb1cc0fbc6251a41","门磁超时","doorMagnetismTimeout","4",400,"pass_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",40,1,now(),now());
INSERT INTO `event_type` values (16,"d9d8e77f4fda421e95b91c4e876e00e5","密码破解","passwordBreak","4",400,"pass_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",60,1,now(),now());
INSERT INTO `event_type` values (404,"e7a758bc68b7431b9ce221803d7ca466","消防告警","fireAlarm","4",400,"pass_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",80,1,now(),now());
INSERT INTO `event_type` values (405,"94a0fda6455949b6b8cd2310045cd240","存储空间告警","storeSpaceAlarm","4",400,"pass_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",100,1,now(),now());
INSERT INTO `event_type` values (406,"c4d59e7cb4a341f3b52aff88514443f9","测温模块失效","testTemperatureOutOfWork","4",400,"pass_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",120,1,now(),now());
INSERT INTO `event_type` values (407,"baa30c9e0df64ad4a1ee7c8aa58e701c","人员底库超限","person_num_limit","4",400,"pass_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",140,1,now(),now());


INSERT INTO `event_type` values (500,"a027b5db6df347b38617a91d8f15a5ac","出入事件","inOut","5",0,"pass_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",100,1,now(),now());
INSERT INTO `event_type` values (501,"0b055b08847e4a38a3e46bd5b6034021","重点人员出入事件","keyPersonInOut","5",500,"pass_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",20,1,now(),now());
INSERT INTO `event_type` values (502,"2240952839f849929a73ae8bf6395955","高温事件","highTemperatureInout","5",500,"pass_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",40,1,now(),now());
INSERT INTO `event_type` values (503,"551a3d57ffd64aca9cef96cb8cff0294","通道陌生人出入事件","passageStrangerInout","5",500,"pass_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",60,1,now(),now());
INSERT INTO `event_type` values (504,"0008b103aab1420ca6e3b82c1ca31ae9","健康码检测未通过出入事件","healthCodeCheckFailInout","5",500,"pass_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",80,1,now(),now());

INSERT INTO `event_type` values (1200,"925084a3ec484945aad9d651907e79b0","结构化类型","structure","12",0,"security_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",240,0,now(),now());
INSERT INTO `event_type` values (1201,"6e0fd532324d42f799e5bc1ef6d34ff0","全量结构化","allStructure","12",0,"security_model","pangu,pangu_xinghe,pangu_haihe,pangu_yy",20,0,now(),now());
```





```json
{"core_video":16,"person_num":100000,"core_alarm":16,"dashboard_pass_mode":1,"pass_model":1,"dashboard_control_mode":1,"high_frequency_model":1,"zone_controll_model":1,"dashboard_control":1,"ai_vedio":128,"alarm_type_action":1,"vehicle_num":100000,"chinese":1,"dashboard_main_mode":1,"core_capture":60,"security_model":1,"core_structure":16,"monitor_video":512,"dashboard_warning_mode":1,"alarm_type_border":1}
```



```
    private EnumSet<EventTypeEnum> suanfacangType = EnumSet.of(AREA_WARN__PERSON_CROSS_BORDER__OVER_WALL,
            AREA_WARN__VEHICLE_CROSS_BORDER__MOTOR,
            AREA_WARN__VEHICLE_CROSS_BORDER__NO_MOTOR,
            AREA_WARN__VEHICLE_FORBID_STOP__MOTOR,
            AREA_WARN__VEHICLE_FORBID_STOP__NO_MOTOR,
            AREA_WARN__VEHICLE_LEAVE__MOTOR,
            AREA_WARN__VEHICLE_LEAVE__NO_MOTOR,
            AREA_WARN__PERSON_HOVER);

```





### 测试数据产生流程

```json
{"captureImageUri":"_ZzEwMF9mb3JldmVyQnVja2V0_1dbf9a08dd82468cb77bd6b83a20bc6f","data":"{\"captureImageUrl\":\"_ZzEwMF9mb3JldmVyQnVja2V0_1dbf9a08dd82468cb77bd6b83a20bc6f\",\"captureTime\":1624417039877,\"deviceName\":\"虚拟视频流\",\"deviceUuid\":\"920b15008bc949c79c826146fba5532d\",\"frameUrl\":\"_ZzEwMF9mb3JldmVyQnVja2V0_597809f250554a2cb7054f67795e7c41\",\"location\":\"N6\",\"personType\":\"全局陌生人\",\"score\":0.0}","deviceId":279,"eventTime":1624417039877,"eventType":102,"fullImageUri":"_ZzEwMF9mb3JldmVyQnVja2V0_597809f250554a2cb7054f67795e7c41","score":-1.0,"trackId":"688a01e7-794f-44de-93dc-a8ccbb6302b6","zoneId":1}
```





```shell
sh install.sh  -p /Users/liuxing/Documents/gitcode/megvii/pangu/ -q pangu-1.1.0/dev -m /Users/liuxing/Documents/gitcode/megvii/middle/ -n pangu-1.1.0/dev -b deploy
```

