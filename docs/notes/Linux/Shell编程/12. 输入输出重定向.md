# 文件描述符

从形式上讲，文件描述符是一个非负整数。实际上，它是一个索引值，指向内核为每个进程所维护的该进程打开文件的记录表。当程序打开一个现有文件或者创建一个新文件时，内核向进程返回一个文件描述符。在程序设计中，一些涉及底层的程序编写往往会围绕着文件描述符展开。但是文件描述符这一概念往往只适用于UNIX及Linux等操作系统。

linux标准输入设备指的是键盘，标准输出设备指的是显示器，标准错误输出指的是显示器。

| 设备   | 设备名      | 文件描述符 | 类型         |
| ------ | ----------- | ---------- | ------------ |
| 键盘   | /dev/stdin  | 0          | 标准输入     |
| 显示器 | /dev/stdout | 1          | 标准输出     |
| 显示器 | /dev/stderr | 2          | 标准错误输出 |

# 输入重定向

是指不使用系统提供的标准输入端口，而进行重新的指定。换言之，输入重定向就是不使用标准输入端口输入文件，而是使用指定的文件作为标准输入设备。（重定向简单理解就是使用 “<”符来修改标准输入设备）。

| 类型                       | 符号（语法）       | 功能                                                 |
| -------------------------- | ------------------ | ---------------------------------------------------- |
| 标准输入                   | 命令<文件1         | 命令把文件1的内容作为标准输入设备                    |
| 标识符限定输入（当前文档） | 命令<<标识符       | 命令把标准输入中读入内容，直到遇到“标识符”分解符为止 |
| 输入输出重定向（同时使用） | 命令< 文件1 >文件2 | 命令把文件1的内容作为标准输入，把文件2作为标准输出。 |

示例：

> 标准输入

```powershell
cat < /etc/passwd
```

> 标识符限定输入

```powershell
security@KSSCS3000H11907020002:/lx/shell$ cat <<,
> 1212
> 33
> ,
1212
33
```

> 输入输出重定向

```powershell
cat < /etc/passwd > b.txt
```

# 输出重定向

所谓输出重定向是指将原本输出到标准输出的数据输出到其他文件或者设备中。输出重定向的操作符为大于号>，

基本语法：

```powershell
cmd [n]> file
```

cmd同样表示Shell命令，n为一个整数，表示文件描述符，大于号为重定向操作符，file为重定向的目标文件。当Shell在执行以上命令时，会将文件file打开，并且与文件描述符n相关联。

重定向多个命令结果：

```powershell
{ cmd1;cmd2;...; } [n]> file
```

## 追加输出重定向

通过>>把结果进行追加重定向，而不像>是覆盖文件



## 输出重定向示例

1. 标准输出到文件

   ```powershell
   cat /etc/passwd 1>m.log
   等价于
   cat /etc/passwd >m.log
   ```

2. 把错误信息收集到文件

   ```powershell
   ls fmt.log a.rt 2>err.log
   ```

3. 正确结果和错误信息分别到不同文件

   ```powershell
   ls fmt.log a.rt 2>err.log 1>correct.log
   ```

4. 把正确和错误结果都存到某个文件（使用&）

   ```powershell
   ls fmt.log a.rt &>all.log
   或：
   ls fmt.log a.rt >all.log  2>&1  #2>&1就是将标准错误输出重定向到与标准输出同一个文件中保存
   ```

5. 丢弃错误信息

   ```powershell
    ls fmt.log a.rt 2>/dev/null
   ```

6. 禁止输出（不要任何结果）

   ```powershell
   ls fmt.log a.rt >/dev/null 2>&1
   ```

<font color="red">注意： 其中/dev/null是一个特殊的标识符，表示空设备，接受到的所有输出都不会保存</font>

7. 新建或者情况文件

   ```powershell
   >file
   或
   :>file
   ```

