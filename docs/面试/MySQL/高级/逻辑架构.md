## 逻辑架构

架构图

![image-20220223183621051](https://gitee.com/firewolf/allinone/raw/master/images/image-20220223183621051.png)

架构分层

- 连接层：客户端和服务器端建立连接，客户端发送 SQL 至服务器端；
- SQL 层（服务层）：对 SQL 语句进行查询处理；与数据库文件的存储方式无关；
- 存储引擎层：与数据库文件打交道，负责数据的存储和读取。



## SQL执行流程

![image-20220223184733931](https://gitee.com/firewolf/allinone/raw/master/images/image-20220223184733931.png)

流程简述

>  SQL语句→查询缓存→解析器→优化器→执行器



## 查询缓存

查询缓存判断的条件比较苛刻，需要完全一样，所以命中率较低，功能比较鸡肋，所以在8.0之后，移除了查询缓存

缓存配置项

```shell
query_cache_type=0 #0 代表关闭，1代表开启
```



## SQL 语句执行顺序

- FROM  <table>
- ON   <join condition> 
- WHERE <where condition>
- GROUP BY <group by list>
- HAVING <having condition>
- SELECT 
- DISTINCT <select list>
- ORDER BY <order by conditon>
- LIMIT <limit number>



