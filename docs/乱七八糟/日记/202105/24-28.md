# 24

1. 参与oncall会议
2. 110级联prd阅读（）



# 25

### 工作记录

1. 110人数统计prd评审；
2. 算法插件化和前端沟通，画出插件管理页面草图：https://wiki.megvii-inc.com/pages/viewpage.action?pageId=261038437；



### 问题跟踪

**101 rc3升级 102 rc2之后结构化相机状态为pause状态**

> 升级过程为：修改相机的pipelineSwitches.lowLatency参数 --- > 把状态为processing和error的相机id记录到文件video.csv中，并暂停相机  ----->  升级core  ------>  把video.csv中记录的video 进行resume操作

跟踪发现：

1. 升级后为pasue的相机id，没有记录到video.csv中；
2. 根据core的日志看到，设置pipelineSwitches.lowLatency这一步操作中，接口返回的相机的状态为processing，但是在记录video.csv的时候，却没有这个id；
3. 推测修改相机配置的过程中，相机的状态不是processing或error；
4. 跟 core 侧同学确认后知道，在修改相机参数的时候，相机会进行重启，过程中相机的状态是VIDEO_PREPARING；

问题解决：

记录相机id的时候，把状态不为pasue的所有相机id都记录下来，保证不会出问题



# 26

1. 升级后人脸结构化信息查询不到

> 人脸结构化信息升级过程： 把原始索引a设置为只读 ---> 重命名a索引为a_old  --->  删除原索引a ----> 新建索引a

跟踪过程：

- 跟踪发现"重命名a索引为a_old "步骤失败抛出异常，导致后面的逻辑没有走，这样，新插入的数据，由于a是只读且feature字段长度为256（新的是文档该字段长度为262），无法写入数据

解决办法：

- 对过程做try ... catch ... finally ，在catch到异常的时候，删除a_old，把升级状态恢复到"未升级"，在finally里面把a索引的只读状态解除



# 27

1. 排查编排工具导出http类型编排NGINX_SERVER的值偶现https路径问题；

   > 编排工具缺少对"不启用Https"分支重置参数逻辑

2. 盘古110人力预估安排

3. 和保新拉齐级联问题r

4. 准备rc2离线包和发版信息



# 28

1. 盘古离线包测试
2. 重新打包video镜像包
